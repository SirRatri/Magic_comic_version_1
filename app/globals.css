@tailwind base;
@tailwind components;
@tailwind utilities;

/* ========================================================================
   MỤC LỤC HỆ THỐNG CSS 2.0 (OMNI-CHANNEL DESIGN SYSTEM)
   ========================================================================
   1. ROOT VARIABLES ..... Cấu hình màu sắc, ánh sáng, vật lý
   2. RESET & BASE ....... Tối ưu hiển thị đa thiết bị, Font chữ lỏng
   3. ANIMATIONS ......... Thư viện chuyển động (Keyframes)
   4. COMPONENTS ......... Nút, Thẻ, Input, Modal, Loader
   5. UTILITIES .......... Tiện ích hỗ trợ layout, hiệu ứng
   6. MOBILE OPTIMZ ...... Tối ưu riêng cho iOS/Android
   ========================================================================
*/

/* ========================================================================
   1. ROOT VARIABLES (BỘ NÃO)
   ======================================================================== */
@layer base {
  :root {
    /* --- COLOR DNA (BẢNG MÀU) --- */
    --background: 5 5 5;       /* Đen sâu (Super AMOLED) */
    --foreground: 250 250 250; /* Trắng titan */

    /* BRAND COLORS (Màu thương hiệu) */
    --primary: 255 75 31;      /* Cam Cháy (Main) */
    --primary-rgb: 255, 75, 31;
    --secondary: 124 58 237;   /* Tím Cyber (Sub) */
    --success: 34 197 94;      /* Xanh lá (Status) */
    --warning: 234 179 8;      /* Vàng (Alert) */
    --danger: 239 68 68;       /* Đỏ (Error) */
    
    /* SURFACE COLORS (Màu nền các lớp) */
    --surface-1: 10 10 10;
    --surface-2: 18 18 18;
    --surface-3: 28 28 28;
    --surface-glass: rgba(0, 0, 0, 0.7);

    /* --- PHYSICS (VẬT LÝ) --- */
    --radius-sm: 0.5rem;
    --radius-md: 1rem;
    --radius-lg: 1.5rem;
    --radius-full: 9999px;

    /* --- EASING (ĐƯỜNG CONG CHUYỂN ĐỘNG) --- */
    --ease-elastic: cubic-bezier(0.68, -0.55, 0.265, 1.55);
    --ease-squish: cubic-bezier(0.5, -0.3, 0.1, 1.5);
    --ease-smooth: cubic-bezier(0.4, 0, 0.2, 1);

    /* --- SHADOWS & GLOWS (ÁNH SÁNG) --- */
    --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
    --shadow-neon: 0 0 20px rgba(var(--primary-rgb), 0.5);
    --shadow-neon-strong: 0 0 50px rgba(var(--primary-rgb), 0.8);
    
    /* --- Z-INDEX LAYERS (QUẢN LÝ LỚP) --- */
    --z-negative: -1;
    --z-normal: 1;
    --z-sticky: 100;
    --z-drawer: 200;
    --z-modal: 300;
    --z-toast: 400;
    --z-cursor: 500;
  }
}

/* ========================================================================
   2. RESET & BASE (NỀN TẢNG)
   ======================================================================== */
@layer base {
  * {
    @apply border-[#27272a]; /* Màu viền mặc định */
    box-sizing: border-box;
    /* Tối ưu chạm trên mobile (bỏ highlight xanh) */
    -webkit-tap-highlight-color: transparent;
  }

  html {
    scroll-behavior: smooth;
    /* Chặn kéo giãn trang trên iOS (Rubber banding) */
    overscroll-behavior-y: none;
    /* Font size lỏng (Fluid Typography): Tự to nhỏ theo màn hình */
    font-size: clamp(14px, 1vw + 10px, 16px);
  }

  body {
    @apply bg-[#050505] text-foreground antialiased;
    /* Tối ưu render font */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    /* Hỗ trợ biến đổi font chữ */
    font-feature-settings: "rlig" 1, "calt" 1, "ss01" 1;
    
    /* Grid nền Matrix mờ ảo */
    background-image: 
      radial-gradient(circle at 50% 0%, rgba(var(--primary-rgb), 0.15), transparent 40%),
      linear-gradient(to bottom, rgba(255,255,255,0.03) 1px, transparent 1px),
      linear-gradient(to right, rgba(255,255,255,0.03) 1px, transparent 1px);
    background-size: 100% 100%, 40px 40px, 40px 40px;
    background-attachment: fixed; /* Parallax nền */
  }

  /* Tối ưu ảnh để không bị nhảy layout (CLS) */
  img {
    content-visibility: auto; 
    max-width: 100%;
    height: auto;
    display: block;
  }
}

/* ========================================================================
   3. ANIMATIONS (THƯ VIỆN CHUYỂN ĐỘNG)
   ======================================================================== */
@layer utilities {
  
  /* 3.1 FADE IN UP (Cơ bản) */
  @keyframes fadeInUp {
    from { opacity: 0; transform: translate3d(0, 40px, 0); }
    to { opacity: 1; transform: translate3d(0, 0, 0); }
  }
  .animate-in-up { animation: fadeInUp 0.8s var(--ease-smooth) forwards; }

  /* 3.2 GLITCH EFFECT (Hiệu ứng nhiễu sóng Cyberpunk) */
  @keyframes glitch {
    0% { transform: translate(0); }
    20% { transform: translate(-2px, 2px); }
    40% { transform: translate(-2px, -2px); }
    60% { transform: translate(2px, 2px); }
    80% { transform: translate(2px, -2px); }
    100% { transform: translate(0); }
  }
  .hover-glitch:hover {
    animation: glitch 0.3s cubic-bezier(.25, .46, .45, .94) both infinite;
    color: rgb(var(--primary-rgb));
    text-shadow: 2px 2px #ff00c1, -2px -2px #00fff9;
  }

  /* 3.3 NEON PULSE (Nhịp thở Neon) */
  @keyframes pulseNeon {
    0%, 100% { box-shadow: 0 0 10px rgba(var(--primary-rgb), 0.2); }
    50% { box-shadow: 0 0 30px rgba(var(--primary-rgb), 0.6); }
  }
  .animate-pulse-neon { animation: pulseNeon 3s infinite; }

  /* 3.4 SHIMMER (Quét sáng Skeleton) */
  @keyframes shimmer {
    0% { transform: translateX(-150%); }
    100% { transform: translateX(150%); }
  }
  .animate-shimmer {
    position: absolute;
    top: 0; left: 0; width: 100%; height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
    animation: shimmer 1.5s infinite;
  }

  /* 3.5 FLOAT (Trôi lơ lửng) */
  @keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
  }
  .animate-float { animation: float 6s ease-in-out infinite; }

  /* 3.6 SPIN (Xoay tròn) */
  @keyframes spin { to { transform: rotate(360deg); } }
  .animate-spin-slow { animation: spin 3s linear infinite; }
}

/* ========================================================================
   4. COMPONENTS (LINH KIỆN UI)
   ======================================================================== */
@layer components {

  /* --- 4.1 BUTTONS --- */
  
  /* Nút Chính (Flagship Button) */
  .btn-tech-primary {
    @apply relative overflow-hidden flex items-center justify-center gap-2 px-6 py-3 rounded-xl font-bold text-white uppercase tracking-wider transition-all duration-300 transform active:scale-95 select-none;
    background: linear-gradient(135deg, rgb(var(--primary-rgb)), #ff9068);
    box-shadow: 
      inset 0 1px 0 rgba(255,255,255,0.2),
      0 10px 20px -5px rgba(var(--primary-rgb), 0.4);
    /* Tối ưu GPU */
    will-change: transform, box-shadow; 
  }
  .btn-tech-primary:hover {
    box-shadow: 0 0 30px rgba(var(--primary-rgb), 0.6);
    filter: brightness(1.1);
    transform: translateY(-2px);
  }

  /* Nút Phụ (Ghost Button) */
  .btn-tech-ghost {
    @apply relative flex items-center justify-center gap-2 px-6 py-3 rounded-xl font-medium text-gray-400 bg-white/5 border border-white/5 transition-all duration-200;
    backdrop-filter: blur(10px);
  }
  .btn-tech-ghost:hover {
    @apply text-white bg-white/10 border-white/20;
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
  }

  /* Nút Icon Tròn */
  .btn-icon-circle {
    @apply w-10 h-10 rounded-full flex items-center justify-center bg-white/5 text-gray-400 hover:text-white hover:bg-white/10 transition-all active:scale-90;
  }

  /* --- 4.2 CARDS (THẺ) --- */
  
  /* Thẻ Kính (Glassmorphism) */
  .card-glass {
    @apply bg-[#121212]/80 backdrop-blur-xl border border-white/5 rounded-2xl overflow-hidden transition-all duration-300;
  }
  .card-glass:hover {
    @apply border-white/20 bg-[#121212];
    box-shadow: 0 20px 40px -10px rgba(0,0,0,0.5);
  }

  /* Thẻ Neon (Dùng cho VIP/Hot) */
  .card-neon {
    @apply relative bg-black border border-white/10 rounded-2xl overflow-hidden;
  }
  .card-neon:hover {
    border-color: rgba(var(--primary-rgb), 0.5);
    box-shadow: 0 0 30px -5px rgba(var(--primary-rgb), 0.3);
  }

  /* --- 4.3 INPUTS & FORMS --- */
  .input-tech {
    @apply w-full bg-[#0a0a0a] border border-white/10 rounded-xl px-4 py-3 text-white placeholder-gray-600 transition-all;
  }
  .input-tech:focus {
    @apply outline-none border-primary/50 bg-[#121212];
    box-shadow: 0 0 0 4px rgba(var(--primary-rgb), 0.1);
  }

  /* Range Slider (Thanh kéo) */
  input[type=range] {
    -webkit-appearance: none;
    background: transparent;
  }
  input[type=range]::-webkit-slider-thumb {
    -webkit-appearance: none;
    height: 16px; width: 16px;
    border-radius: 50%;
    background: rgb(var(--primary-rgb));
    cursor: pointer;
    margin-top: -6px;
    box-shadow: 0 0 10px rgba(var(--primary-rgb), 0.8);
    transition: transform 0.1s;
  }
  input[type=range]::-webkit-slider-thumb:hover { transform: scale(1.2); }
  input[type=range]::-webkit-slider-runnable-track {
    width: 100%; height: 4px;
    background: #333; border-radius: 2px;
  }
}

/* ========================================================================
   5. UTILITIES (TIỆN ÍCH HỖ TRỢ)
   ======================================================================== */
@layer utilities {
  
  /* 5.1 TYPOGRAPHY */
  .text-balance { text-wrap: balance; }
  .text-gradient {
    @apply bg-clip-text text-transparent bg-gradient-to-r from-white via-gray-200 to-gray-500;
  }
  .text-glow { text-shadow: 0 0 10px rgba(255,255,255,0.3); }
  
  /* 5.2 SCROLLBARS */
  ::-webkit-scrollbar { width: 6px; height: 6px; }
  ::-webkit-scrollbar-track { background: transparent; }
  ::-webkit-scrollbar-thumb { 
    background: #333; 
    border-radius: 10px; 
    border: 2px solid #050505; 
  }
  ::-webkit-scrollbar-thumb:hover { background: rgb(var(--primary-rgb)); }
  
  .scrollbar-hide {
    -ms-overflow-style: none; scrollbar-width: none;
  }
  .scrollbar-hide::-webkit-scrollbar { display: none; }

  /* 5.3 LAYOUT HELPERS */
  .center-absolute {
    @apply absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2;
  }
  
  .flex-center {
    @apply flex items-center justify-center;
  }

  /* 5.4 GPU HACKS (TĂNG TỐC ĐỘ RENDER) */
  .gpu-accelerated {
    transform: translateZ(0);
    backface-visibility: hidden;
    perspective: 1000px;
  }
  
  /* 5.5 CONTENT VISIBILITY (CHỈ RENDER KHI CẦN - GOOGLE KHUYÊN DÙNG) */
  .render-lazy {
    content-visibility: auto;
    contain-intrinsic-size: 0 500px; /* Chiều cao ước lượng */
  }

  /* 5.6 MASKING (MẶT NẠ MỜ) */
  .mask-gradient-b {
    mask-image: linear-gradient(to bottom, black 80%, transparent);
    -webkit-mask-image: linear-gradient(to bottom, black 80%, transparent);
  }
}

/* ========================================================================
   6. MOBILE OPTIMIZATION (TỐI ƯU DI ĐỘNG)
   ======================================================================== */
@media (max-width: 640px) {
  body {
    /* Tắt ảnh nền phức tạp trên mobile để tiết kiệm pin */
    background-image: none;
    background-color: #050505;
  }

  /* Tăng vùng bấm cho các nút */
  button, a {
    min-height: 44px; /* Chuẩn Apple Human Interface */
    min-width: 44px;
  }

  /* Tắt hover effect (vì mobile không có chuột) */
  .btn-tech-primary:hover { transform: none; box-shadow: none; }
  
  /* Chỉnh lại Modal full màn hình trên mobile */
  .modal-content {
    width: 100% !important;
    height: 100% !important;
    border-radius: 0 !important;
  }
}

/* ========================================================================
   7. PRINT STYLES (KHI IN ẤN)
   ======================================================================== */
@media print {
  body { background: white; color: black; }
  .no-print { display: none; }
}