@tailwind base;
@tailwind components;
@tailwind utilities;

/* ========================================================================
   HỆ THỐNG OMNI-CHANNEL CSS v3.0 (TITANIUM EDITION)
   Author: Magic Team
   Description: Core styles, Animations, Components & Reset
   ======================================================================== */

/* ========================================================================
   1. ROOT VARIABLES (BẢNG ĐIỀU KHIỂN TRUNG TÂM)
   ======================================================================== */
@layer base {
  :root {
    /* --- COLOR PALETTE (BẢNG MÀU) --- */
    /* Màu nền chính: Đen sâu thẳm cho màn OLED */
    --background: 5 5 5;       
    --background-hex: #050505;

    /* Màu chữ chính: Trắng Titan */
    --foreground: 250 250 250; 
    --foreground-hex: #fafafa;

    /* BRAND IDENTITY (Màu thương hiệu) */
    /* Cam Cháy (Electric Orange) - Màu chủ đạo */
    --primary: 255 75 31;      
    --primary-rgb: 255, 75, 31;
    --primary-hex: #ff4b1f;

    /* Tím Cyber (Secondary) - Dùng cho điểm nhấn phụ */
    --secondary: 124 58 237;   
    --secondary-rgb: 124, 58, 237;

    /* Màu trạng thái (Status Colors) */
    --success: 34 197 94;      /* Xanh lá báo thành công */
    --warning: 234 179 8;      /* Vàng báo lỗi nhẹ */
    --danger: 239 68 68;       /* Đỏ báo lỗi nghiêm trọng */
    
    /* SURFACE LAYERS (Các lớp bề mặt) */
    --surface-1: 10 10 10;
    --surface-2: 18 18 18;
    --surface-3: 28 28 28;
    --surface-glass: rgba(0, 0, 0, 0.7);
    --border-color: rgba(255, 255, 255, 0.1);

    /* --- PHYSICS & SPACING (VẬT LÝ) --- */
    --radius-sm: 0.5rem;
    --radius-md: 0.75rem;
    --radius-lg: 1rem;
    --radius-xl: 1.5rem;
    --radius-full: 9999px;

    /* --- ANIMATION CURVES (ĐƯỜNG CONG CHUYỂN ĐỘNG) --- */
    --ease-elastic: cubic-bezier(0.68, -0.55, 0.265, 1.55);
    --ease-squish: cubic-bezier(0.5, -0.3, 0.1, 1.5);
    --ease-smooth: cubic-bezier(0.4, 0, 0.2, 1);
    --ease-out-expo: cubic-bezier(0.19, 1, 0.22, 1);

    /* --- LIGHTING (ÁNH SÁNG NEON) --- */
    --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
    --shadow-neon: 0 0 20px rgba(var(--primary-rgb), 0.5);
    --shadow-neon-strong: 0 0 50px rgba(var(--primary-rgb), 0.8);
    
    /* --- Z-INDEX SYSTEM (HỆ THỐNG LỚP) --- */
    --z-negative: -1;
    --z-normal: 1;
    --z-sticky: 100;
    --z-drawer: 200;
    --z-modal: 300;
    --z-toast: 400;
    --z-cursor: 500;
  }
}

/* ========================================================================
   2. RESET & BASE STYLES (CẤU HÌNH CỐT LÕI)
   ======================================================================== */
@layer base {
  /* Reset mặc định cho mọi phần tử */
  * {
    border-color: #27272a; /* Màu viền mặc định tối */
    box-sizing: border-box; /* Tính toán kích thước chuẩn */
    /* Tối ưu chạm trên mobile (bỏ highlight xanh mặc định của Android/iOS) */
    -webkit-tap-highlight-color: transparent;
  }

  /* Cấu hình HTML gốc */
  html {
    scroll-behavior: smooth; /* Cuộn mượt */
    overscroll-behavior-y: none; /* Chặn hiệu ứng kéo giãn trang trên iOS */
    /* Fluid Typography: Chữ tự to nhỏ theo màn hình từ 14px đến 16px */
    font-size: clamp(14px, 1vw + 10px, 16px);
    -webkit-text-size-adjust: 100%;
  }

  /* Cấu hình BODY chính */
  body {
    background-color: var(--background-hex);
    color: rgb(var(--foreground));
    
    /* Tối ưu render font chữ sắc nét */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    
    /* Kích hoạt các tính năng font cao cấp */
    font-feature-settings: "rlig" 1, "calt" 1, "ss01" 1;
    
    /* --- BACKGROUND CÔNG NGHỆ CAO (PARALLAX) --- */
    /* Lớp 1: Chấm tròn mờ ở giữa */
    /* Lớp 2: Kẻ sọc ngang mờ */
    /* Lớp 3: Kẻ sọc dọc mờ */
    background-image: 
      radial-gradient(circle at 50% 0%, rgba(var(--primary-rgb), 0.15), transparent 40%),
      linear-gradient(to bottom, rgba(255,255,255,0.03) 1px, transparent 1px),
      linear-gradient(to right, rgba(255,255,255,0.03) 1px, transparent 1px);
    
    background-size: 100% 100%, 40px 40px, 40px 40px;
    background-attachment: fixed; /* Giữ nền đứng yên khi cuộn */
    
    /* Đảm bảo chiều cao full màn hình */
    min-height: 100vh;
    position: relative;
    overflow-x: hidden;
  }

  /* Tối ưu hiển thị ảnh */
  img {
    content-visibility: auto; /* Chỉ render khi lướt tới (Tăng tốc độ load) */
    max-width: 100%;
    height: auto;
    display: block;
    user-select: none; /* Chống copy ảnh */
    -webkit-user-drag: none; /* Chống kéo ảnh */
  }

  /* Bỏ style mặc định của input search trên iOS */
  input[type="search"]::-webkit-search-decoration,
  input[type="search"]::-webkit-search-cancel-button,
  input[type="search"]::-webkit-search-results-button,
  input[type="search"]::-webkit-search-results-decoration {
    -webkit-appearance: none;
  }
}

/* ========================================================================
   3. ADVANCED ANIMATIONS (THƯ VIỆN CHUYỂN ĐỘNG)
   ======================================================================== */
@layer utilities {
  
  /* 3.1 Fade In Up (Trượt từ dưới lên) */
  @keyframes fadeInUp {
    from { 
      opacity: 0; 
      transform: translate3d(0, 40px, 0); 
    }
    to { 
      opacity: 1; 
      transform: translate3d(0, 0, 0); 
    }
  }
  .animate-in-up { 
    animation: fadeInUp 0.8s var(--ease-smooth) forwards; 
  }

  /* 3.2 Glitch Effect (Nhiễu sóng Cyberpunk) */
  @keyframes glitch {
    0% { transform: translate(0); }
    20% { transform: translate(-2px, 2px); }
    40% { transform: translate(-2px, -2px); }
    60% { transform: translate(2px, 2px); }
    80% { transform: translate(2px, -2px); }
    100% { transform: translate(0); }
  }
  .hover-glitch:hover {
    animation: glitch 0.3s cubic-bezier(.25, .46, .45, .94) both infinite;
    color: var(--primary-hex);
    text-shadow: 2px 2px #ff00c1, -2px -2px #00fff9;
  }

  /* 3.3 Neon Pulse (Nhịp thở Neon - Dùng cho Badge/Nút) */
  @keyframes pulseNeon {
    0%, 100% { box-shadow: 0 0 10px rgba(var(--primary-rgb), 0.2); }
    50% { box-shadow: 0 0 30px rgba(var(--primary-rgb), 0.6); }
  }
  .animate-pulse-neon { 
    animation: pulseNeon 3s infinite; 
  }
  .animate-pulse-slow { 
    animation: pulseNeon 4s infinite; 
  }

  /* 3.4 Shimmer (Quét sáng Skeleton Loading) */
  @keyframes shimmer {
    0% { transform: translateX(-150%); }
    100% { transform: translateX(150%); }
  }
  .animate-shimmer {
    position: absolute;
    top: 0; 
    left: 0; 
    width: 100%; 
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
    animation: shimmer 1.5s infinite;
    z-index: 10;
  }

  /* 3.5 Float (Trôi lơ lửng - Dùng cho vật thể 3D) */
  @keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
  }
  .animate-float { 
    animation: float 6s ease-in-out infinite; 
  }

  /* 3.6 Spin (Xoay tròn chậm) */
  @keyframes spin { 
    to { transform: rotate(360deg); } 
  }
  .animate-spin-slow { 
    animation: spin 3s linear infinite; 
  }
}

/* ========================================================================
   4. COMPONENTS SYSTEM (THƯ VIỆN GIAO DIỆN)
   LƯU Ý: Đã viết bằng CSS thuần để fix lỗi @apply của Netlify
   ======================================================================== */
@layer components {

  /* --- 4.1 BUTTONS (HỆ THỐNG NÚT BẤM) --- */
  
  /* Nút Chính (Flagship Button) */
  .btn-tech-primary {
    position: relative;
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
    /* FIX LỖI gap-2: Dùng CSS thuần */
    gap: 0.5rem; 
    padding: 0.75rem 1.5rem;
    border-radius: var(--radius-md);
    
    /* Typography */
    font-weight: 700;
    color: white;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    font-size: 0.875rem;
    
    /* Interaction */
    transition: all 0.3s var(--ease-smooth);
    cursor: pointer;
    user-select: none;
    
    /* Visuals */
    background: linear-gradient(135deg, rgb(var(--primary-rgb)), #ff9068);
    box-shadow: 
      inset 0 1px 0 rgba(255,255,255,0.2),
      0 10px 20px -5px rgba(var(--primary-rgb), 0.4);
      
    /* Performance */
    will-change: transform, box-shadow; 
  }
  
  .btn-tech-primary:hover {
    box-shadow: 0 0 30px rgba(var(--primary-rgb), 0.6);
    filter: brightness(1.1);
    transform: translateY(-2px);
  }
  
  .btn-tech-primary:active {
    transform: scale(0.95);
  }

  /* Nút Phụ (Ghost Button - Kính mờ) */
  .btn-tech-ghost {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    padding: 0.75rem 1.5rem;
    border-radius: var(--radius-md);
    
    font-weight: 600;
    color: #9ca3af; /* Gray-400 */
    font-size: 0.875rem;
    
    background-color: rgba(255,255,255,0.05);
    border: 1px solid rgba(255,255,255,0.05);
    transition: all 0.2s var(--ease-smooth);
    backdrop-filter: blur(10px);
    cursor: pointer;
  }
  
  .btn-tech-ghost:hover {
    color: white;
    background-color: rgba(255,255,255,0.1);
    border-color: rgba(255,255,255,0.2);
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
  }
  
  .btn-tech-ghost:active {
    transform: scale(0.95);
  }

  /* Nút Icon Tròn (Dùng cho Social/Action) */
  .btn-icon-circle {
    width: 2.5rem;
    height: 2.5rem;
    border-radius: 9999px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: rgba(255,255,255,0.05);
    color: #9ca3af;
    transition: all 0.2s;
    cursor: pointer;
    border: none;
  }
  
  .btn-icon-circle:hover {
    color: white;
    background-color: rgba(255,255,255,0.1);
    transform: scale(1.1);
  }

  /* --- 4.2 CARDS (HỆ THỐNG THẺ) --- */
  
  /* Thẻ Kính (Glassmorphism) */
  .card-glass {
    background-color: rgba(18, 18, 18, 0.8);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px); /* Cho Safari */
    border: 1px solid rgba(255, 255, 255, 0.05);
    border-radius: 1rem;
    overflow: hidden;
    transition: all 0.3s ease;
  }
  
  .card-glass:hover {
    border-color: rgba(255, 255, 255, 0.2);
    background-color: rgba(18, 18, 18, 1);
    box-shadow: 0 20px 40px -10px rgba(0,0,0,0.5);
    transform: translateY(-2px);
  }

  /* Thẻ Neon (Dùng cho VIP/Hot) */
  .card-neon {
    position: relative;
    background-color: #000;
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 1rem;
    overflow: hidden;
    transition: all 0.3s;
  }
  
  .card-neon:hover {
    border-color: rgba(var(--primary-rgb), 0.5);
    box-shadow: 0 0 30px -5px rgba(var(--primary-rgb), 0.3);
  }

  /* --- 4.3 INPUTS & FORMS (NHẬP LIỆU) --- */
  
  /* Ô nhập liệu công nghệ cao */
  .input-tech {
    width: 100%;
    background-color: #0a0a0a;
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 0.75rem;
    padding: 0.75rem 1rem;
    color: white;
    font-size: 1rem;
    transition: all 0.3s var(--ease-smooth);
  }
  
  .input-tech::placeholder {
    color: #52525b; /* Gray-600 */
  }
  
  .input-tech:focus {
    outline: none;
    border-color: rgba(var(--primary-rgb), 0.5);
    background-color: #121212;
    box-shadow: 0 0 0 4px rgba(var(--primary-rgb), 0.1);
  }

  /* Range Slider (Thanh kéo tùy chỉnh) */
  input[type=range] {
    -webkit-appearance: none;
    background: transparent;
    width: 100%;
    cursor: pointer;
  }
  
  /* Thumb (Cục tròn để kéo) - Webkit */
  input[type=range]::-webkit-slider-thumb {
    -webkit-appearance: none;
    height: 16px; 
    width: 16px;
    border-radius: 50%;
    background: var(--primary-hex);
    margin-top: -6px;
    box-shadow: 0 0 10px rgba(var(--primary-rgb), 0.8);
    transition: transform 0.1s;
  }
  
  input[type=range]::-webkit-slider-thumb:hover { 
    transform: scale(1.2); 
  }
  
  /* Track (Thanh đường ray) - Webkit */
  input[type=range]::-webkit-slider-runnable-track {
    width: 100%; 
    height: 4px;
    background: #333; 
    border-radius: 2px;
  }
  
  /* Hỗ trợ Firefox */
  input[type=range]::-moz-range-thumb {
    height: 16px; width: 16px;
    border: none;
    border-radius: 50%;
    background: var(--primary-hex);
    box-shadow: 0 0 10px rgba(var(--primary-rgb), 0.8);
  }
}

/* ========================================================================
   5. UTILITIES (TIỆN ÍCH HỖ TRỢ)
   ======================================================================== */
@layer utilities {
  
  /* Typography Utilities */
  .text-balance { text-wrap: balance; }
  
  .text-gradient {
    background-clip: text;
    -webkit-background-clip: text;
    color: transparent;
    background-image: linear-gradient(to right, #fff, #e5e7eb, #6b7280);
  }
  
  .text-glow { 
    text-shadow: 0 0 10px rgba(255,255,255,0.3); 
  }
  
  /* Scrollbar Customization (Thanh cuộn đẹp) */
  ::-webkit-scrollbar { 
    width: 6px; 
    height: 6px; 
  }
  
  ::-webkit-scrollbar-track { 
    background: transparent; 
  }
  
  ::-webkit-scrollbar-thumb { 
    background: #333; 
    border-radius: 10px; 
    border: 2px solid #050505; 
  }
  
  ::-webkit-scrollbar-thumb:hover { 
    background: var(--primary-hex); 
  }
  
  /* Ẩn thanh cuộn nhưng vẫn cuộn được */
  .scrollbar-hide {
    -ms-overflow-style: none; /* IE/Edge */
    scrollbar-width: none; /* Firefox */
  }
  
  .scrollbar-hide::-webkit-scrollbar { 
    display: none; /* Chrome/Safari */
  }

  /* Positioning Helpers */
  .center-absolute {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
  }
  
  .flex-center {
    display: flex;
    align-items: center;
    justify-content: center;
  }

  /* GPU Hacks (Tăng tốc độ render) */
  .gpu-accelerated {
    transform: translateZ(0);
    backface-visibility: hidden;
    perspective: 1000px;
  }
  
  /* Content Visibility (Chỉ render khi cần - Google khuyên dùng) */
  .render-lazy {
    content-visibility: auto;
    contain-intrinsic-size: 0 500px; /* Chiều cao ước lượng */
  }

  /* Masking (Mặt nạ mờ) */
  .mask-gradient-b {
    mask-image: linear-gradient(to bottom, black 80%, transparent);
    -webkit-mask-image: linear-gradient(to bottom, black 80%, transparent);
  }
}

/* ========================================================================
   6. MOBILE OPTIMIZATION (TỐI ƯU DI ĐỘNG)
   ======================================================================== */
@media (max-width: 640px) {
  body {
    /* Tắt ảnh nền phức tạp trên mobile để tiết kiệm pin */
    background-image: none;
    background-color: var(--background-hex);
  }

  /* Tăng vùng bấm cho các nút (Chuẩn Apple Human Interface) */
  button, a {
    min-height: 44px; 
    min-width: 44px;
  }

  /* Tắt hover effect trên mobile (vì không có chuột) */
  .btn-tech-primary:hover { 
    transform: none; 
    box-shadow: none; 
  }
  
  /* Chỉnh lại Modal full màn hình trên mobile */
  .modal-content {
    width: 100% !important;
    height: 100% !important;
    border-radius: 0 !important;
    max-height: 100vh !important;
  }
}

/* ========================================================================
   7. PRINT STYLES (KHI IN ẤN)
   ======================================================================== */
@media print {
  body { 
    background: white; 
    color: black; 
    text-shadow: none;
  }
  
  .no-print { 
    display: none !important; 
  }
  
  .btn-tech-primary,
  .btn-tech-ghost {
    border: 1px solid #000;
    color: #000;
    background: none;
    box-shadow: none;
  }
}